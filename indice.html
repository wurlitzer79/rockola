<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Índice</title>
  <link rel="stylesheet" href="css/estilo.css">
</head>
<body>
	<main>
		<h1>Wurlitzer</h1>
		<div id="menu" class="menu"><p>Cargando carátulas...</p></div>
		<script>
		// Función para cargar metadatos de una colección
		async function fetchThumbnails(collectionId) {
		  const apiUrl = `https://archive.org/metadata/${collectionId}`;
		  try {
			const response = await fetch(apiUrl);
			const data = await response.json();
			return data.files.filter(file => file.name.endsWith("_ia_thumb.jpg")); // Filtrar solo _ia_thumb.jpg
		  } catch (error) {
			console.error(`Error al cargar ${collectionId}:`, error);
			return [];
		  }
		}

		// Generar menú dinámico
		async function generateMenu() {
		  const collections = [
			{ id: "billboard-80s",							name: "Billboard 80s" }
		   ,{ id: "chep-1995-peor-es-mascar-lauchas",		name: "Chancho en Piedra - 1995 Peor es Mascar Lauchas" }
		   ,{ id: "chep-1997-la-dieta-del-lagarto",			name: "Chancho en Piedra - 1997 La Dieta del Lagarto" }
		   ,{ id: "chep-1998-rindanse-terricolas",			name: "Chancho en Piedra - 1998 Rindanse Terricolas" }
		   ,{ id: "chep-2000-marca-chancho",				name: "Chancho en Piedra - 2000 Marca Chancho" }
		   ,{ id: "chep-2002-el-tinto-elemento",			name: "Chancho en Piedra - 2002 El Tinto Elemento" }
		   ,{ id: "chep-2004-chancho-6",					name: "Chancho en Piedra - 2004 Chancho 6" }
		   ,{ id: "chep-2005-desde-el-batiscafo",			name: "Chancho en Piedra - 2005 Desde el Batiscafo" }
		   ,{ id: "chep-2007-grandes-exitos-de-ayer-y-oink",name: "Chancho en Piedra - 2007 Grandes Exitos de Ayer y Oink" }
		   ,{ id: "djdaga-megamix-chep",					name: "Chancho en Piedra - MegaMix" }		   
		   ,{ id: "compilado-musica-anos-80-90-00-cd01",	name: "Compilado Musica Años 80-90-00 cd01" }		   
		   ,{ id: "compilado-musica-anos-80-90-00-cd-02",	name: "Compilado Musica Años 80-90-00 cd02" }
		   ,{ id: "compilado-musica-anos-80-90-00-cd-03",	name: "Compilado Musica Años 80-90-00 cd03" }
		   ,{ id: "dia-de-la-madre",						name: "Canciones del día de la Madre" }		   
		   ,{ id: "dia-del-padre_202210",					name: "Canciones del día del Padre" }		   
		   ,{ id: "euro-dance", 			   				name: "Euro Dance" }
		   ,{ id: "fiesta-mixes",							name: "Fiesta Mixes" }		   
		   ,{ id: "les-luthiers_202202",					name: "Les Luthiers" }		   
		   ,{ id: "los-mox",								name: "Los Mox!" }
		   ,{ id: "mix-cumbias",							name: "Mix Cumbias" }
		   ,{ id: "nirvana_20221028",						name: "Nirvana" }
		   ,{ id: "primer-cd-lony-dj",						name: "Primer CD - LonyDJ" }
		   ,{ id: "Raggamufin", 			   				name: "Raggamufin" }
		   ,{ id: "the-classic-project",       				name: "The Classic Project" }
		   ,{ id: "tributo-a-los-fabulosos-cadillacs-vos-sabes...-como-te-esperaba-2009", name: "Tributo a los Fabulosos Cadillacs Vos Sabes" }
		   ,{ id: "tributo-a-los-prisioneros", 				name: "Tributo a los Prisioneros" }
		  ];

		  const menu = document.getElementById("menu");
		  menu.innerHTML = ""; // Limpiar menú

		  for (const collection of collections) {
			const thumbnails = await fetchThumbnails(collection.id);

			thumbnails.forEach(file => {
			  const menuItem = document.createElement("div");
			  menuItem.className = "menu-item";
			  menuItem.innerHTML = `
				<a href="reproduce2.html?id=${collection.id}&name=${collection.name}">
					<img src="https://archive.org/download/${collection.id}/${file.name}" alt="${collection.name}">
				</a>
				<p>${collection.name}</p>				
			  `;
			  menuItem.onclick = () => {
				//alert(`Has seleccionado: ${collection.id}`)
				//location.href = "reproduce.html?name=${collection.id}";
			  };
			  menu.appendChild(menuItem);
			});
		  }

		  if (menu.innerHTML === "") {
			menu.innerHTML = "<p>No se encontraron carátulas.</p>";
		  }
		}

		// Llamar a la función para generar el menú
		generateMenu();
		</script>
	</main>
	<footer>
		℗copyright 2025 - LASA
	</footer>
	<footer style="display: flex;">
		<div style="width:33%; text-align:left;">&nbsp;</div>
		<div style="width:34%; text-align:center; vertical-align: bottom;">
			℗copyright 2025 - LASA
		</div>
		<div style="width:33%; text-align:right;">&nbsp;</div>
	</footer>	
</body>
</html>